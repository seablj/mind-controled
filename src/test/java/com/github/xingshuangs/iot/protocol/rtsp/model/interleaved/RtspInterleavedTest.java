package com.github.xingshuangs.iot.protocol.rtsp.model.interleaved;

import org.junit.Test;

import java.util.List;

import static org.junit.Assert.*;


public class RtspInterleavedTest {

    @Test
    public void listFromBytes() {

        byte[] expect = new byte[]{
                0x24, 0x00, 0x00, 0x20,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x24, 0x00, 0x00, 0x10,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x24, 0x00, 0x00, 0x14,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00
        };
        List<RtspInterleaved> interleaveds = RtspInterleaved.listFromBytes(expect);
        assertEquals(3, interleaveds.size());
        assertEquals(32, interleaveds.get(0).getLength());
        assertEquals(32, interleaveds.get(0).getPayload().length);
        assertEquals(16, interleaveds.get(1).getLength());
        assertEquals(16, interleaveds.get(1).getPayload().length);
        assertEquals(20, interleaveds.get(2).getLength());
        assertEquals(20, interleaveds.get(2).getPayload().length);

    }
}